<html>

<head>


  <script>
           let server = 'http://lojinha-seu-joao.herokuapp.com:3000';
    function azedo() {
      var usu = document.getElementById('usuario').value;
      var pass = document.getElementById('senha').value;
      var snackbar = document.getElementById("snackbar");
      if (usu != null && usu != "" && pass != null && pass != "") {
        var usuario = { 'usuario': usu, 'senha': pass };
        console.log(usuario);
        console.log('Posting...');
        fetch( server + "/valSenha", {
          method: 'post',
          headers: {
            "Content-Type": "application/json"
          },
          body: JSON.stringify(usuario)
        }).then(res => res.json())
          .then((out) => {
            out.forEach(log => {
              if (log.usuario == usu && log.senha == pass) {
                window.location.href = server + "/home";
                console.log('nome');
                console.log(log.usuario);
              } else {
                snackbar.innerHTML = "Senhas ou Usuario Invalidos"
                snackbar.className = "show";
                setTimeout(function () { snackbar.className = snackbar.className.replace("show", ""); }, 3000);
              }
            })
          }).then(function (data){
            console.log(data.res);
            if(data.res != undefined){
              snackbar.innerHTML = "Senhas ou Usuario Invalidos"
              snackbar.className = "show";
              setTimeout(function () { snackbar.className = snackbar.className.replace("show", ""); }, 3000); 
            }else{

            }
          })

          }
    }

  </script>

</head>

<body>
  <div style="border: solid black 3px; margin-top: 17%; margin-left: 40%; margin-right: 40%;">
    <div style="text-align: center;">
      <h1>Login</h1>
    </div>
    <form autocomplete="off">
      <input type="text" placeholder="UsÃºario" maxlength="20"
        style="margin-left: 27%; margin-top: 1%; margin-right: 1%;" id="usuario" />
      <br>
      <input type="password" placeholder="Senha" maxlength="15"
        style="margin-left: 27%; margin-top: 1%; margin-right: 1%;" id="senha">
      <br>
      <button onclick="azedo()" type="button" style="margin-left: 43%; margin-top: 1%;">Logar</button>
      <br>
      <br>
      <a href="http://localhost/cadUsuario" style="margin-top: 1%; margin-left: 40%;">Cadastre-se</a>
  </div>
  </form>
  <div id="snackbar" style="margin-top: 1%; margin-left: 4%;"></div>


</body>

</html>