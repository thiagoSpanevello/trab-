<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">
  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
  <script>
    google.charts.load('current', { 'packages': ['corechart'] });
    google.charts.setOnLoadCallback(drawChart);
    function drawChart() {
      var column = ["mes", "valor"]
      let dados = [];
      dados.push(column);
      let url = `http://localhost/grafVenda`;
      fetch(url)
        .then(res => res.json())
        .then((out) => {
          out.forEach(element => {
            mes = element.mes;
            valor = element.total;
            if (mes == 1) {
              mes = "janeiro"
            } else if (mes == 2) {
              mes = "fevereiro"
            } else if (mes == 3) {
              mes = "março"
            } else if (mes == 4) {
              mes = "abril"
            } else if (mes == 5) {
              mes = "maio"
            } else if (mes == 6) {
              mes = "junho"
            } else if (mes == 7) {
              mes = "julho"
            } else if (mes == 8) {
              mes = "agosto"
            } else if (mes == 9) {
              mes = "setembro"
            } else if (mes == 10) {
              mes = "outubro"
            } else if (mes == 11) {
              mes = "novembro"
            } else if (mes == 12) {
              mes = "desembro"
            }
            let array = [];
            array = [mes, valor]
            dados.push(array);
            console.log("dados");
            console.log(dados);
          });

          var data = google.visualization.arrayToDataTable(dados)

          var options = {
            title: 'Valores De Vendas Mensais',
            curveType: 'function',
            legend: { position: 'bottom' }
          };

          var chart = new google.visualization.LineChart(document.getElementById('curve_chart'));

          chart.draw(data, options);


        })
    }





  </script>

  <title>Lojinha do seu João</title>

  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

  <!-- Custom styles for this template -->
  <link href="css/simple-sidebar.css" rel="stylesheet">



</head>

<body>

  <div class="d-flex" id="wrapper">

    <!-- Sidebar -->
    <div class="static border-right" id="sidebar-wrapper">
      <div class="sidebar-heading " style="font-size: 40px">Grafico de Vendas</div>
      <div class="list-group list-group-flush">
        <div class="list-group-item list-group-item-action bg-dark"
          style="font-size: 25px; text-align: center; padding-right: 20%;">Vendas</div>
        <a href="/cadVenda.html" class="list-group-item list-group-item-action bg-light">Nova venda</a>
        <a href="/listaVenda.html" class="list-group-item list-group-item-action bg-light">Histórico de Vendas</a>
        <a href="/grafVenda.html" class="list-group-item list-group-item-action bg-light">Grafico de Vendas</a>
        <div class="list-group-item list-group-item-action bg-dark"
          style="font-size: 25px; text-align: center; padding-right: 20%;"> Produtos</div>
        <a href="/cadProd.html" class="list-group-item list-group-item-action bg-light">Novo Produto</a>
        <a href="/listaProd.html" class="list-group-item list-group-item-action bg-light">Listagem de Produtos</a>
        <a href="/grafProd.html" class="list-group-item list-group-item-action bg-light">Grafico de Produtos</a>
      </div>
    </div>
    <!-- /#sidebar-wrapper -->

    <!-- Page Content -->
    <div id="page-content-wrapper">

      <nav class="navbar navbar-expand-lg navbar-light border-bottom">

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav ml-auto mt-2 mt-lg-0">
            <li class="nav-item active">
              <a class="nav-link" href="/home.html">Home <span class="sr-only">(current)</span></a>
            </li>
          </ul>
        </div>
      </nav>
      <div style="border: solid black 2px; margin-left: 15%; margin-right: 25%; margin-top: 5%;" >
      <div id="curve_chart" style="width: 900px; height: 500px"></div>
    </div>
    </div>
  </div>
</body>

</html>