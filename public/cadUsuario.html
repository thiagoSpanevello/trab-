<!DOCTYPE html>
<html lang="en">

<head>


    <script>
        let server = 'https://lojinha-seu-joao.herokuapp.com';
        function cadastrar() {
            let nomeUsu = document.getElementById('usuario').value;
            let primSen = document.getElementById('senha1').value;
            let segSen = document.getElementById('senha2').value;
            var snackbar = document.getElementById("snackbar");
            if (nomeUsu == null || nomeUsu == "" || primSen == null || primSen == "" || segSen == null || segSen == "") {
                    snackbar.innerHTML = "Usuário ou senha indefinidos"
                    snackbar.className = "show";
                    setTimeout(function () { snackbar.className = snackbar.className.replace("show", ""); }, 3000);
            } else {
                if (primSen == segSen) {
                    let objeto = ({ 'nome': nomeUsu, 'senha': primSen });
                    console.log(objeto);
                    console.log('Posting...');
                    fetch(server + '/cadUsuario', {
                        method: 'post',
                        headers: {
                            "Content-Type": "application/json"
                        },
                        body: JSON.stringify(objeto)
                    }).then(function (response) {
                        return response.json();
                    })
                } else {
                    snackbar.innerHTML = "Senhas Diferentes"
                    snackbar.className = "show";
                    setTimeout(function () { snackbar.className = snackbar.className.replace("show", ""); }, 3000);
                }

            }
            window.history.back();
        }
    </script>


    <title>Lojinha do seu João</title>


</head>

<body>
    <div style="border: solid black 3px; margin-top: 17%; margin-left: 40%; margin-right: 40%;">
        <div style="text-align: center;">
            <h1>Cadastro de usuario</h1>
        </div>
        <form autocomplete="off">
            <input type="text" placeholder="Nome do Usuario" maxlength="20"
                style="margin-left: 27%; margin-top: 1%; margin-right: 1%;" id="usuario" />
            <br>
            <input type="password" placeholder="Senha" maxlength="15"
                style="margin-left: 27%; margin-top: 1%; margin-right: 1%;" id="senha1">
            <br>
            <input type="password" placeholder="Confirmar Senha" maxlength="15"
                style="margin-left: 27%; margin-top: 1%; margin-right: 1%;" id="senha2" />
            <button onclick="cadastrar()" type="button" style="margin-left: 40%; margin-top: 1%;">Cadastrar</button>
            <br>
            <br>
    </div>
    </form>
    <div id="snackbar" style="margin-top: 1%; margin-left: 4%;"></div>

</body>

</html>